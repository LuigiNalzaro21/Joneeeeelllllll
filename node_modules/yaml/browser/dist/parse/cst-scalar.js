import { resolveBlockScalar } from '../compose/resolve-block-scalar.js';
import { resolveFlowScalar } from '../compose/resolve-flow-scalar.js';
import { YAMLParseError } from '../errors.js';
import { stringifyString } from '../stringify/stringifyString.js';

function resolveAsScalar(token, strict = true, onError) {
    if (token) {
        const _onError = (pos, code, message) => {
            const offset = typeof pos === 'number' ? pos : Array.isArray(pos) ? pos[0] : pos.offset;
            if (onError)
                onError(offset, code, message);
            else
                throw new YAMLParseError([offset, offset + 1], code, message);
        };
        switch (token.type) {
            case 'scalar':
            case 'single-quoted-scalar':
            case 'double-quoted-scalar':
                return resolveFlowScalar(token, strict, _onError);
            case 'block-scalar':
                return resolveBlockScalar(token, strict, _onError);
        }
    }
    return null;
}
/**
 * Create a new scalar token with `value`
 *
 * Values that represent an actual string but may be parsed as a different type should use a `type` other than `'PLAIN'`,
 * as this function does not support any schema operations and won't check for such conflicts.
 *
 * @param value The string representation of the value, which will have its content properly indented.
 * @param context.end Comments and whitespace after the end of the value, or after the block scalar header. If undefined, a newline will be added.
 * @param context.implicitKey Being within an implicit key may affect the resolved type of the token's value.
 * @param context.indent The indent level of the token.
 * @param context.inFlow Is this scalar within a flow collection? This may affect the resolved type of the token's value.
 * @param context.offset The offset position of the token.
 * @param context.type The preferred type of the scalar token. If undefined, the previous type of the `token` will be used, defaulting to `'PLAIN'`.
 */
function createScalarToken(value, context) {
    const { implicitKey = false, indent, inFlow = false, offset = -1, type = 'PLAIN' } = context;
    const source = stringifyString({ type, value }, {
        implicitKey,
        indent: indent > 0 ? ' '.repeat(indent) : '',
        inFlow,
        options: { blockQuote: true, lineWidth: -1 }
    });
    const end = context.end ?? [
        { type: 'newline', offset: -1, indent, source: '\n' }
    ];
    switch (source[0]) {
        case '|':
        case '>': {
            const he = source.indexOf('\n');
            const head = source.substring(0, he);
            const body = source.substring(he + 1) + '\n';
            const props = [
                { type: 'block-scalar-header', offset, indent, source: head }
            ];
            if (!addEndtoBlockProps(props, end))
                props.push({ type: 'newline', offset: -1, indent, source: '\n' });
            return { type: 'block-scalar', offset, indent, props, source: body };
        }
        case '"':
            return { type: 'double-quoted-scalar', offset, indent, source, end };
        case "'":
            return { type: 'single-quoted-scalar', offset, indent, source, end };
        default:
            return { type: 'scalar', offset, indent, source, end };
    }
}
/**
 * Set the value of `token` to the given string `value`, overwriting any previous contents and type that it may have.
 *
 * Best efforts are made to retain any comments previously associated with the `token`,
 * though all contents within a collection's `items` will be overwritten.
 *
 * Values that represent an actual string but may be parsed as a different type should use a `type` other than `'PLAIN'`,
 * as this function does not support any schema operations and won't check for such conflicts.
 *
 * @param token Any token. If it does not include an `indent` value, the value will be stringified as if it were an implicit key.
 * @param value The string representation of the value, which will have its content properly indented.
 * @param context.aftra",
  "digitalIdWalletFeedbackDislikePersonalInfoFeatrures": "Gostaria de ver funcionalidades para gerir melhor os meus endereços",
  "donateCashDisclaimer": "Ao fazer um donativo, concorda com os nossos $1 e reconhece que o seu nome, endereço e montante de donativo serão partilhados com a Benevity, de acordo com os nossos $2, e com a AOGF, de acordo com e sujeito aos $3 e $4 da Benevity. $5.$6 Organizações sem fins lucrativos não são apoiadas pela Microsoft. A Microsoft associa-se à Benevity para facilitar as doações. Está a doar a um fundo de doadores da American Online Giving Foundation (AOGF) com uma recomendação de que eles façam uma subvenção correspondente a $7. Concorda em permitir que a AOGF assuma o controlo legal exclusivo da sua doação. Os donativos não são reembolsáveis.",
  "donateRewardsPointsDisclaimer": "As organizações sem fins lucrativos não são apoiadas pela Microsoft. A Microsoft faz parcerias com a Benevity para doar a organizações sem fins lucrativos com base em pontos do Rewards resgatados por pessoas como você. $1",
  "donatedBack": "Voltar",
  "donatedNPODefautlDescription": "Uma oferta sua ajuda a fazer a diferença. Envie uma oferta com os seus próprios fundos ou pontos Rewards que ganhou. Depois de doar, o resultado da doação será enviado para o seu e-mail. $1 Obrigado por considerar fazer uma doação a $2.",
  "donatedPerMonth": "/mês",
  "donatedPointsCount": "$1 pontos",
  "donationAddCardButton": "+ Adicionar um novo cartão",
  "donationAmount": "Montante",
  "donationAvailablePoints": "Pontos disponíveis",
  "donationBenevityPrivacy": "Política de Privacidade",
  "donationCVVInputError": "Código de verificação de cartão inválido",
  "donationCVVInputTitle": "Código de segurança (CVC/CVV)",
  "donationCancel": "Cancelar",
  "donationCashPivot": "Com dinheiro",
  "donationClose": "Fechar",
  "donationContinueAction": "Continuar",
  "donationDate": "Data",
  "donationDonateAction": "Doar",
  "donationDoneButton": "Concluído",
  "donationEmail": "O seu recibo será enviado para",
  "donationEmailInvalid": "Verifique novamente o seu endereço de e-mail",
  "donationEmailPlaceholder": "E-mail",
  "donationEmptyHistoryDescription": "As suas doações podem ajudar a fazer um impacto maior",
  "donationEmptyHistoryExploreNPO": "Explorar outras organizações sem fins lucrativos",
  "donationEmptyHistoryTitle": "Ainda não existe histórico de donativos",
  "donationExceedMaxAmount": "O montante do donativo não pode exceder $1",
  "donationExploreMore": "Explorar mais",
  "donationExploreSearchPlaceholder": "Introduza o nome da organização",
  "donationExploreTab": "Explorar",
  "donationExploreTitle": "Explorar organizações em todo o mundo",
  "donationExportCardError": "Lamentamos, mas esta doação não foi criada. Tente novamente com um cartão diferente.",
  "donationFailedDonation": "Falha na doação",
  "donationFrequencyMonthly": "Doação mensal",
  "donationFrequencyOneTime": "Doação única",
  "donationGenericTransactionError": "Lamentamos, mas esta doação não foi criada porque estamos com problemas técnicos para processar o seu pagamento. Tente novamente mais tarde.",
  "donationGenericTransactionErrorWithReferenceId": "Lamentamos, mas esta doação não foi criada porque estamos com problemas técnicos para processar o seu pagamento. Tente novamente mais tarde. (ID de referência: $1)",
  "donationGiveAction": "Oferecer",
  "donationHistory": "Histórico de Donativos",
  "donationHistoryDetailTitle": "Detalhes da doação",
  "donationHistoryRecurringTitle": "Obrigado pelos seus presentes contínuos",
  "donationHistoryTab": "Histórico de Donativos",
  "donationIncentivePointsBannerTitle": "Doe agora e ganhe $1 pontos do Microsoft Rewards antes de 30 de junho.",
  "donationIncentivePointsSuccessMessage": "Recebeu $1 pontos por este donativo.",
  "donationJoinRewards": "Participe para doar com pontos",
  "donationJoinRewardsDescription": "Com o Microsoft Rewards, ganhará pontos só por utilizar o Bing. Resgate os pontos para obter cartões de oferta, jogos e muito mais. Ou então doe-os a uma organização sem fins lucrativos e ajude a fazer a diferença. $1",
  "donationJoinRewardsTermsAndPrivacy": "Irá receber e-mails sobre o Microsoft Rewards, que incluem ofertas sobre produtos da Microsoft e de parceiros. $1 | $2",
  "donationJoinRewardsTitle": "Junte-se ao Microsoft Rewards e receba 100 pontos para começar a doar por nós!",
  "donationLessThanMin": "O montante do donativo não pode ser inferior a $1",
  "donationMSPrivacyLink": "Declaração de Privacidade da Microsoft",
  "donationManagement": "Doação",
  "donationMonthly": "Mensalmente",
  "donationOneTime": "Uma vez",
  "donationOrganizations": "Organizações",
  "donationOtherAmount": "Outro",
  "donationOverviewBannerTitle": "Os seus donativos podem ajudar $1 a ter um impacto maior",
  "donationOverviewDonatedToTitle": "Traga luz ao mundo novamente",
  "donationOverviewExploreMore": "Explorar mais",
  "donationOverviewHaveSupported": "Apoiou",
  "donationOverviewSumm